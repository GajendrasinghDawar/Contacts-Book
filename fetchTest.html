<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>form test</title>
  </head>
  <body>
    <div>
      <form>
        <label for="fname">
          firstname :
          <input type="text" name="first_name" id="fname" />
        </label>
        <label for="lname">
          lastname :
          <input type="text" name="last_name" id="lname" />
        </label>
        <br />
        <label for="myfile">
          avatar_image:
          <input type="file" name="avatar_image" id="avatar_image" />
        </label>
        <button type="button" id="btn">Sumit</button>
      </form>
    </div>
    <br>
    <br>
    <div>
      <form>
        <label for="searchme">
          search form
          <input type="text" id="searchme" type="search" name="gaju">
        </label>
      </form>
    </div>
    <script>
      const formData = new FormData();

      //   let myfile = document.getElementById("myfile");
      let fname = document.getElementById("fname");
      let lname = document.getElementById("lname");
      const fileField = document.querySelector('input[type="file"]');
      let btn = document.getElementById("btn");

      btn.addEventListener("click", function () {

        formData.append("first_name" , fname.value);
        formData.append("last_name" , lname.value);
        formData.append("avatar_image", fileField.files[0]);
console.log(formData)
        fetch("http://127.0.0.1:8000/contacts/", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())
          .then((result) => {
            console.log("Success:", result);
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      });
    </script>
  </body>
</html>
